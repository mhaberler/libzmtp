lib_LTLIBRARIES = libzmtp.la

pkgconfigdir = $(libdir)/pkgconfig
pkgconfig_DATA = libzmtp.pc

include_HEADERS = \
    ../include/zmtp.h \
    ../include/zmtp_prelude.h \
    ../include/zmtp_msg.h \
    ../include/zmtp_dealer.h

libzmtp_la_SOURCES = \
    platform.h \
    zmtp_msg.c \
    zmtp_channel.h \
    zmtp_channel.c \
    zmtp_dealer.c \
    zmtp_endpoint.h \
    zmtp_endpoint.c \
    zmtp_ipc_endpoint.h \
    zmtp_ipc_endpoint.c \
    zmtp_tcp_endpoint.h \
    zmtp_tcp_endpoint.c

AM_CFLAGS = -g
AM_CPPFLAGS = -I$(top_srcdir)/include
bin_PROGRAMS = libzmtp_selftest testdealer testxsub
libzmtp_selftest_LDADD = libzmtp.la
libzmtp_selftest_SOURCES = zmtp_selftest.c
libzmtp_la_LDFLAGS = -version-info @LTVER@

testdealer_LDADD = libzmtp.la
testdealer_SOURCES = testdealer.c

testxsub_LDADD = libzmtp.la
testxsub_SOURCES = testxsub.c

TESTS = libzmtp_selftest testdealer testxsub
